{"version":3,"sources":["../../api/test/meals_test.js"],"names":["process","env","NODE_ENV","assert","chai","expect","use","chaiHttp","admin0_Payload","name","phone","email","password","admin1_Payload","before","done","Admin","create","then","describe","it","request","server","get","res","to","have","status","equal","body","catch","err","console","log","message","findOne","where","admin","id","token","jwt","sign","isAdmin","secret","expiresIn","set","post","send","price","caterer","field","attach","Meal","quantity","adminId","meal","put","fs","unlink","destroy","delete","after"],"mappings":"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","sourcesContent":["process.env.NODE_ENV = 'test';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\nimport chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport server from '../src/app';\r\nimport jwt from 'jsonwebtoken';\r\nimport secret from '../src/util/jwt';\r\nimport Admin from '../src/models/admin';\r\nimport Meal from '../src/models/meals';\r\nconst { assert, expect } = chai;\r\nchai.use(chaiHttp);\r\n\r\n// const srcImg = '../testImage/3.jpg';\r\n// const imageFolder = '../src/images';\r\n\r\nconst admin0_Payload = {\r\n  name: 'admin admin',\r\n  phone: '07060538862',\r\n  email: 'admin@gmail.com',\r\n  password: 'admin123456'\r\n};\r\n\r\nconst admin1_Payload = {\r\n  name: 'admin1 admin1',\r\n  phone: '09057996214',\r\n  email: 'admin1@gmail.com',\r\n  password: 'admin123456'\r\n};\r\nbefore(done => {\r\n  Admin.create(admin1_Payload).then(() => {\r\n    done();\r\n  });\r\n});\r\n\r\ndescribe('Amin Get all Meals', () => {\r\n  it(`GET /api/v1/meals/ - Fetch All Meals Unauthorized`, done => {\r\n    chai\r\n      .request(server)\r\n      .get(`/api/v1/meals/`)\r\n      .then(res => {\r\n        expect(res).to.have.status(401);\r\n        assert.equal(res.body.status, 'error');\r\n        done();\r\n      })\r\n      .catch(err => console.log('GET /meals/', err.message));\r\n  });\r\n  it(`GET /api/v1/meals/ - Fetch All Meals - (Admin Authorized)`, done => {\r\n    Admin.findOne({ where: { email: admin1_Payload.email } })\r\n      .then(admin => {\r\n        const { id, name, email, phone } = admin;\r\n        const token = jwt.sign(\r\n          {\r\n            admin: { id, name, email, phone },\r\n            isAdmin: true\r\n          },\r\n          secret,\r\n          {\r\n            expiresIn: 86400\r\n          }\r\n        );\r\n        chai\r\n          .request(server)\r\n          .get(`/api/v1/meals/`)\r\n          .set('Authorization', `Bearer ${token}`)\r\n          .then(res => {\r\n            expect(res).to.have.status(200);\r\n            assert.equal(res.body.status, 'success');\r\n            done();\r\n          })\r\n          .catch(err => console.log('GET /meals/', err.message));\r\n      })\r\n      .catch(err => console.log(err.message));\r\n  });\r\n});\r\n\r\ndescribe('Admin Add Meal ', () => {\r\n  it(`POST /api/v1/meals/ - Add Meal Unauthorized`, done => {\r\n    chai\r\n      .request(server)\r\n      .post(`/api/v1/meals/`)\r\n      .send({\r\n        name: 'Koko Garri',\r\n        price: 500\r\n      })\r\n      .then(res => {\r\n        expect(res).to.have.status(401);\r\n        assert.equal(res.body.status, 'error');\r\n        done();\r\n      })\r\n      .catch(err => console.log('POST /meals/', err.message));\r\n  });\r\n  it(`POST /api/v1/meals/ - Add Meal Option - Validate`, done => {\r\n    Admin.findOne({ where: { email: admin0_Payload.email } })\r\n      .then(admin => {\r\n        const token = jwt.sign(\r\n          {\r\n            caterer: {\r\n              id: admin.id,\r\n              name: admin.name,\r\n              email: admin.email,\r\n              phone: admin.phone\r\n            },\r\n            isAdmin: true\r\n          },\r\n          secret,\r\n          {\r\n            expiresIn: '1h'\r\n          }\r\n        );\r\n        chai\r\n          .request(server)\r\n          .post(`/api/v1/meals/`)\r\n          .set('Authorization', `Bearer ${token}`)\r\n          .send({\r\n            name: 'koko Garri',\r\n            price: 500\r\n          })\r\n          .then(res => {\r\n            expect(res).to.have.status(400);\r\n            assert.equal(res.body.status, 'error');\r\n            done();\r\n          })\r\n          .catch(err => console.log('POST /meals/', err.message));\r\n      })\r\n      .catch(err => console.log(err.message));\r\n  });\r\n  it(`POST /api/v1/meals/ - Add Meal  - Admin Can Add Meal Option`, done => {\r\n    Admin.findOne({ where: { email: admin0_Payload.email } })\r\n      .then(admin => {\r\n        const token = jwt.sign(\r\n          {\r\n            caterer: {\r\n              id: admin.id,\r\n              name: admin.name,\r\n              email: admin.email,\r\n              phone: admin.phone\r\n            },\r\n            isAdmin: true\r\n          },\r\n          secret,\r\n          {\r\n            expiresIn: '1h'\r\n          }\r\n        );\r\n        chai\r\n          .request(server)\r\n          .post(`/api/v1/meals/`)\r\n          .set('Authorization', `Bearer ${token}`)\r\n          .field('name', 'fufu')\r\n          .field('price', 500)\r\n          .field('quantity', 'small')\r\n          .attach('image', '../testImages/3.png', '3.png')\r\n          .then(res => {\r\n            expect(res).to.have.status(200);\r\n            assert.equal(res.body.status, 'success');\r\n            done();\r\n          })\r\n          .catch(err => console.log('POST /meals/', err.message));\r\n      })\r\n      .catch(err => console.log(err.message));\r\n  });\r\n});\r\n\r\ndescribe('Admin Can Modify Meal', () => {\r\n  Admin.create(admin1_Payload)\r\n    .then(admin => {\r\n      return Meal.create({\r\n        name: 'rice',\r\n        price: 1000,\r\n        quantity: 3,\r\n        adminId: admin.id\r\n      });\r\n    })\r\n    .then(meal => {\r\n      it(`PUT /api/v1/meals/:Id - Modify Meal Option Unauthorized`, done => {\r\n        chai\r\n          .request(server)\r\n          .put(`/api/v1/meals/${meal.id}`)\r\n          .send({\r\n            name: 'beans',\r\n            price: 600\r\n          })\r\n          .then(res => {\r\n            expect(res).to.have.status(401);\r\n            assert.equal(res.body.status, 'error');\r\n            done();\r\n          })\r\n          .catch(err => console.log('PUT /meals/:Id', err.message));\r\n      });\r\n      it(`PUT /api/v1/meals/:Id - Modify Meal Option = Validate`, done => {\r\n        Admin.findOne({ where: { email: admin1_Payload.email } })\r\n          .then(admin => {\r\n            const token = jwt.sign(\r\n              {\r\n                caterer: {\r\n                  id: admin.id,\r\n                  name: admin.name,\r\n                  email: admin.email,\r\n                  phone: admin.phone\r\n                },\r\n                isAdmin: true\r\n              },\r\n              secret,\r\n              {\r\n                expiresIn: '1h'\r\n              }\r\n            );\r\n            chai\r\n              .request(server)\r\n              .put(`/api/v1/meals/${meal.id}`)\r\n              .set('Authorization', `Bearer ${token}`)\r\n              .send({\r\n                name: 'stew'\r\n              })\r\n              .then(res => {\r\n                expect(res).to.have.status(400);\r\n                assert.equal(res.body.status, 'error');\r\n                done();\r\n              })\r\n              .catch(err => console.log('POST /meals/:Id', err.message));\r\n          })\r\n          .catch(err => console.log(err.message));\r\n      });\r\n\r\n      it(`PUT /api/v1/meals/:Id - Modify Meal Option Admin Can Modify Meal Option`, done => {\r\n        Admin.findOne({ where: { email: admin1_Payload.email } })\r\n          .then(admin => {\r\n            const token = jwt.sign(\r\n              {\r\n                caterer: {\r\n                  id: admin.id,\r\n                  name: admin.name,\r\n                  email: admin.email,\r\n                  phone: admin.phone\r\n                },\r\n                isAdmin: true\r\n              },\r\n              secret,\r\n              {\r\n                expiresIn: 86400\r\n              }\r\n            );\r\n            chai\r\n              .request(server)\r\n              .put(`/api/v1/meals/${meal.id}`)\r\n              .set('Authorization', `Bearer ${token}`)\r\n              .field('name', 'meal')\r\n              .field('price', 200)\r\n              .attach('image', '../testImage/3.jpg', '3.jpg')\r\n              .then(res => {\r\n                expect(res).to.have.status(200);\r\n                assert.equal(res.body.status, 'success');\r\n                fs.unlink('../src/images/3.jpg', err => {\r\n                  if (err) console.log(err.message);\r\n                });\r\n                Meal.destroy({ where: { id: meal.id } }).then(() => {\r\n                  done();\r\n                });\r\n              })\r\n              .catch(err => console.log('POST /meals/:Id', err.message));\r\n          })\r\n          .catch(err => console.log(err.message));\r\n      });\r\n    });\r\n});\r\n\r\ndescribe('Admin Can Delete Meal', () => {\r\n  Admin.create(admin1_Payload)\r\n    .then(admin => {\r\n      return Meal.create({\r\n        name: 'rice',\r\n        price: 1000,\r\n        quantity: 3,\r\n        adminId: admin.id\r\n      });\r\n    })\r\n    .then(meal => {\r\n      it(`/api/v1/meals/:Id - Delete Meal (Unauthorized)`, done => {\r\n        chai\r\n          .request(server)\r\n          .delete(`/api/v1/meals/${meal.id}`)\r\n          .then(res => {\r\n            expect(res).to.have.status(401);\r\n            assert.equal(res.body.status, 'error');\r\n            done();\r\n          })\r\n          .catch(err => console.log('DELETE /meals/:Id', err.message));\r\n      });\r\n      it(`DELETE /api/v1/meals/:Id - Delete Meal - Authorized`, done => {\r\n        Admin.findOne({ where: { email: admin0_Payload.email } })\r\n          .then(admin => {\r\n            const { id, name, email, phone } = admin;\r\n            const token = jwt.sign(\r\n              {\r\n                caterer: { id, name, email, phone },\r\n                isAdmin: true\r\n              },\r\n              secret,\r\n              {\r\n                expiresIn: '1h'\r\n              }\r\n            );\r\n            chai\r\n              .request(server)\r\n              .delete(`/api/v1/meals/${meal.id}`)\r\n              .set('Authorization', `Bearer ${token}`)\r\n              .then(res => {\r\n                expect(res).to.have.status(200);\r\n                assert.equal(res.body.status, 'success');\r\n                done();\r\n              })\r\n              .catch(err => console.log('DELETE /meals/:Id', err.message));\r\n          })\r\n          .catch(err => console.log(err.message));\r\n      });\r\n    });\r\n});\r\n\r\nafter(done => {\r\n  Admin.destroy({ where: { email: admin0_Payload.email } })\r\n    .then(async () => {\r\n      await Admin.destroy({ where: { email: admin1_Payload.email } });\r\n      return Admin.destroy({ where: { email: admin0_Payload.email } });\r\n    })\r\n    .then(() => {\r\n      done();\r\n    });\r\n});\r\n"],"file":"meals_test.js"}