{"version":3,"sources":["../../api/test/menu_test.js"],"names":["process","env","NODE_ENV","assert","chai","expect","use","chaiHttp","user_Payload","name","email","phone","password","admin0_Payload","admin1_Payload","before","done","User","create","then","Admin","describe","it","request","server","get","res","to","have","status","equal","body","catch","err","console","log","message","findOne","where","user","id","token","jwt","sign","secret","expiresIn","set","app","admin","isAdmin","Meal","price","imageUrl","quantity","adminId","meal","Id","post","send","caterer","mealId","data","update","after","destroy"],"mappings":"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","sourcesContent":["process.env.NODE_ENV = 'test';\r\nimport chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport server from '../src/app';\r\nimport jwt from 'jsonwebtoken';\r\nimport secret from '../src/util/jwt';\r\nimport User from '../src/models/user';\r\nimport Admin from '../src/models/admin';\r\nimport Meal from '../src/models/meals';\r\nconst { assert, expect } = chai;\r\nchai.use(chaiHttp);\r\n\r\nconst user_Payload = {\r\n  name: 'steve burma',\r\n  email: 'burma@gmail.com',\r\n  phone: '09078909098',\r\n  password: 'steve12345'\r\n};\r\n\r\nconst admin0_Payload = {\r\n  name: 'andrei burma',\r\n  email: 'andrei@gmail.com',\r\n  phone: '09078909098',\r\n  password: 'andrei12345'\r\n};\r\n\r\nconst admin1_Payload = {\r\n  name: 'cliff burma',\r\n  email: 'cliff@gmail.com',\r\n  phone: '09057996214',\r\n  password: 'cliff12345'\r\n};\r\n\r\nbefore(done => {\r\n  User.create(user_Payload)\r\n    .then(() => {\r\n      return Admin.create(admin0_Payload);\r\n    })\r\n    .then(() => {\r\n      done();\r\n    });\r\n});\r\n\r\ndescribe('User Get all Menus Endpoints', () => {\r\n  it(`GET/api/v1/menu/ - Fetch All Menus Unauthorized`, done => {\r\n    chai\r\n      .request(server)\r\n      .get(`/api/v1/menu/`)\r\n      .then(res => {\r\n        expect(res).to.have.status(401);\r\n        assert.equal(res.body.status, 'error');\r\n        done();\r\n      })\r\n      .catch(err => console.log('GET /menu/', err.message));\r\n  });\r\n\r\n  it(`GET / api / v1 / menu / - Fetch All Menus ----- User Authorized`, done => {\r\n    User.findOne({ where: { email: user_Payload.email } }).then(user => {\r\n      const { id, name, email, phone } = user;\r\n      const token = jwt.sign(\r\n        {\r\n          user: { id, name, email, phone }\r\n        },\r\n        secret,\r\n        {\r\n          expiresIn: '1h'\r\n        }\r\n      );\r\n      chai\r\n        .request(server)\r\n        .get(`/api/v1/menu/`)\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .then(res => {\r\n          expect(res).to.have.status(200);\r\n          assert.equal(res.body.status, 'success');\r\n          done();\r\n        })\r\n        .catch(err => console.log('GET /menu/', err.message));\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('Admin Can Get their Menu Endpoint', () => {\r\n  it(`/aoi/v1/menu/admin - Fetch Menu (Unauthorized)`, done => {\r\n    chai\r\n      .request(app)\r\n      .get(`/api/v1/menu/admin`)\r\n      .then(res => {\r\n        expect(res).to.have.status(401);\r\n        assert.equal(res.body.status, 'error');\r\n        done();\r\n      })\r\n      .catch(err => console.log('GET /menu/admin', err.message));\r\n  });\r\n\r\n  it(`GET /api/v1/menu/admin - Fetch Menu - (Admin Authorized)`, done => {\r\n    Admin.findOne({ where: { email: admin0_Payload.email } }).then(admin => {\r\n      const { id, name, email, phone } = admin;\r\n      const token = jwt.sign(\r\n        {\r\n          admin: { id, name, email, phone },\r\n          isAdmin: true\r\n        },\r\n        secret,\r\n        {\r\n          expiresIn: '1h'\r\n        }\r\n      );\r\n      chai\r\n        .request(server)\r\n        .get(`api/v1/menu/admin`)\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .then(res => {\r\n          expect(res).to.have.status(200);\r\n          assert.equal(res.body.status, 'success');\r\n          done();\r\n        })\r\n        .catch(err => console.log('GET /menu/caterer', err.message));\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('Admin Can Add Meal To Menu Endpoint', () => {\r\n  Admin.create(admin1_Payload)\r\n    .then(admin => {\r\n      return Meal.create({\r\n        name: 'white soup',\r\n        price: 400,\r\n        imageUrl: 'img.png',\r\n        quantity: 'small',\r\n        adminId: admin.id\r\n      });\r\n    })\r\n    .then(meal => {\r\n      const Id = meal.id;\r\n      it(`POST /api/v1/menu/ - Add Meal Option To Menu ==== Unauthorized`, done => {\r\n        chai\r\n          .request(server)\r\n          .post(`/api/v1/menu/`)\r\n          .send({\r\n            Id,\r\n            quantity: 'small'\r\n          })\r\n          .then(res => {\r\n            expect(res).to.have.status(401);\r\n            assert.equal(res.body.status, 'error');\r\n            done();\r\n          })\r\n          .catch(err => console.log('POST /menu/', err.message));\r\n      });\r\n\r\n      it(`POST api/v1/menu/ - Add Meal To Menu === Admin Can Add Menu Meal`, done => {\r\n        Admin.findOne({ where: { email: admin0_Payload.email } })\r\n          .then(admin => {\r\n            const token = jwt.sign(\r\n              {\r\n                caterer: {\r\n                  id: admin.id,\r\n                  name: admin.name,\r\n                  email: admin.email,\r\n                  phone: admin.phone\r\n                },\r\n                isAdmin: true\r\n              },\r\n              secret,\r\n              {\r\n                expiresIn: '1h'\r\n              }\r\n            );\r\n            chai\r\n              .request(server)\r\n              .post(`/api/v1/menu/`)\r\n              .set('Authorization', `Bearer ${token}`)\r\n              .send({\r\n                mealId,\r\n                quantity: 'small'\r\n              })\r\n              .then(res => {\r\n                expect(res).to.have.status(200);\r\n                assert.equal(res.body.status, 'success');\r\n                done();\r\n              })\r\n              .catch(err => console.log('POST /menu/', err.message));\r\n          })\r\n          .catch(err => console.log(err.message));\r\n      });\r\n      it(`POST api/v1/menu/ - Add Meal To Menu === Admin Can Update Menu Meal`, done => {\r\n        Admin.findOne({ where: { email: admin0_Payload.email } }).then(admin => {\r\n          const token = jwt.sign(\r\n            {\r\n              caterer: {\r\n                id: admin.id,\r\n                name: admin.name,\r\n                email: admin.email,\r\n                phone: admin.phone\r\n              },\r\n              isAdmin: true\r\n            },\r\n            secret,\r\n            {\r\n              expiresIn: '1h'\r\n            }\r\n          );\r\n          chai\r\n            .request(server)\r\n            .post(`/api/v1/menu/`)\r\n            .set('Authorization', `Bearer ${token}`)\r\n            .send({\r\n              mealId,\r\n              quantity: 2\r\n            })\r\n            .then(res => {\r\n              expect(res).to.have.status(200);\r\n              assert.equal(res.body.status, 'success');\r\n              assert.equal(res.body.data[0].quantity, 2);\r\n              Meal.update({ where: { id: mealId } }).then(() => {\r\n                done();\r\n              });\r\n            })\r\n            .catch(err => console.log('POST /menu/', err.message));\r\n        });\r\n      });\r\n    })\r\n    .catch(err => console.log(err.message));\r\n});\r\n\r\nafter(done => {\r\n  User.destroy({ where: { email: user_Payload.email } })\r\n    .then(async () => {\r\n      await Admin.destroy({ where: { email: admin0_Payload.email } });\r\n      return Admin.destroy({ where: { email: admin1_Payload.email } });\r\n    })\r\n    .then(() => {\r\n      done();\r\n    });\r\n});\r\n"],"file":"menu_test.js"}