{"version":3,"sources":["../../api/src/app.js"],"names":["app","PORT","process","env","client","Client","connectionString","DATABASE_URL","ssl","connect","use","bodyParser","json","urlencoded","extended","swaggerUi","serve","setup","swaggerDocument","router","get","req","res","status","send","message","User","hasMany","Order","constraints","onDelete","OrderItem","belongsTo","Admin","Meal","Menu","sequelize","sync","then","listen","console","log","emit","catch","err","error"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,IAAMA,GAAG,GAAG,uBAAZ;AACA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AACA;AACA,IAAMG,MAAM,GAAG,IAAIC,UAAJ,CAAW;AACxBC,EAAAA,gBAAgB,EAAEJ,OAAO,CAACC,GAAR,CAAYI,YADN;AAExBC,EAAAA,GAAG,EAAE;AAFmB,CAAX,CAAf;AAIAJ,MAAM,CAACK,OAAP;AAEAT,GAAG,CAACU,GAAJ,CAAQC,oBAAWC,IAAX,EAAR;AACAZ,GAAG,CAACU,GAAJ,CAAQC,oBAAWE,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAd,GAAG,CAACU,GAAJ,CAAQ,oBAAR;AACAV,GAAG,CAACU,GAAJ,CAAQ,WAAR,EAAqBK,0BAAUC,KAA/B,EAAsCD,0BAAUE,KAAV,CAAgBC,gBAAhB,CAAtC;AACAlB,GAAG,CAACU,GAAJ,CAAQS,cAAR;AAEAnB,GAAG,CAACoB,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzB,SAAOA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BC,IAAAA,OAAO;AADmB,GAArB,CAAP;AAGD,CAJD,E,CAMA;;AACAC,cAAKC,OAAL,CAAaC,eAAb,EAAoB;AAAEC,EAAAA,WAAW,EAAE,IAAf;AAAqBC,EAAAA,QAAQ,EAAE;AAA/B,CAApB;;AACAJ,cAAKC,OAAL,CAAaI,mBAAb,EAAwB;AAAEF,EAAAA,WAAW,EAAE,IAAf;AAAqBC,EAAAA,QAAQ,EAAE;AAA/B,CAAxB;;AACAF,gBAAMI,SAAN,CAAgBC,cAAhB,EAAuB;AAAEJ,EAAAA,WAAW,EAAE,IAAf;AAAqBC,EAAAA,QAAQ,EAAE;AAA/B,CAAvB;;AACAI,eAAKF,SAAL,CAAeC,cAAf,EAAsB;AAAEJ,EAAAA,WAAW,EAAE,IAAf;AAAqBC,EAAAA,QAAQ,EAAE;AAA/B,CAAtB;;AACAK,cAAKH,SAAL,CAAeC,cAAf,EAAsB;AAAEJ,EAAAA,WAAW,EAAE,IAAf;AAAqBC,EAAAA,QAAQ,EAAE;AAA/B,CAAtB;;AACAC,oBAAUC,SAAV,CAAoBE,cAApB,EAA0B;AAAEL,EAAAA,WAAW,EAAE,IAAf;AAAqBC,EAAAA,QAAQ,EAAE;AAA/B,CAA1B;;AAEAM,YACGC,IADH,GAEGC,IAFH,CAEQ,YAAM;AACVtC,EAAAA,GAAG,CAACuC,MAAJ,CAAWtC,IAAX,EAAiB,YAAM;AACrBuC,IAAAA,OAAO,CAACC,GAAR,iCAAqCxC,IAArC;AACAuC,IAAAA,OAAO,CAACC,GAAR,CAAY,+CAAZ;AACAzC,IAAAA,GAAG,CAAC0C,IAAJ,CAAS,aAAT;AACD,GAJD;AAKD,CARH,EASGC,KATH,CASS,UAAAC,GAAG,EAAI;AACZJ,EAAAA,OAAO,CAACK,KAAR,CAAc,oCAAd,EAAoDD,GAApD;AACD,CAXH;;eAae5C,G","sourcesContent":["import '@babel/polyfill';\r\nimport express from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport router from '../src/routes/index';\r\nimport cors from 'cors';\r\nimport sequelize from './util/db';\r\nimport { config } from 'dotenv';\r\nimport { Client } from 'pg';\r\nimport User from './models/user';\r\nimport Admin from './models/admin';\r\nimport Meal from './models/meals';\r\nimport Menu from './models/menu';\r\nimport Order from './models/orders';\r\nimport OrderItem from './models/orderItems';\r\nimport swaggerUi from 'swagger-ui-express';\r\nimport swaggerDocument from './swagger.json';\r\n\r\nconst app = express();\r\nconst PORT = process.env.PORT || 8000;\r\nconfig();\r\nconst client = new Client({\r\n  connectionString: process.env.DATABASE_URL,\r\n  ssl: true\r\n});\r\nclient.connect();\r\n\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(cors());\r\napp.use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerDocument));\r\napp.use(router);\r\n\r\napp.get('/', (req, res) => {\r\n  return res.status(200).send({\r\n    message: `Welcome To Book-A-Meal-App Book-A-Meal is an application that allows customers to make food orders and helps the food vendor know what the customers want to eat.`\r\n  });\r\n});\r\n\r\n// relationship\r\nUser.hasMany(Order, { constraints: true, onDelete: 'CASCADE' });\r\nUser.hasMany(OrderItem, { constraints: true, onDelete: 'CASCADE' });\r\nOrder.belongsTo(Admin, { constraints: true, onDelete: 'CASCADE' });\r\nMeal.belongsTo(Admin, { constraints: true, onDelete: 'CASCADE' });\r\nMenu.belongsTo(Admin, { constraints: true, onDelete: 'CASCADE' });\r\nOrderItem.belongsTo(Meal, { constraints: true, onDelete: 'CASCADE' });\r\n\r\nsequelize\r\n  .sync()\r\n  .then(() => {\r\n    app.listen(PORT, () => {\r\n      console.log(`App listening to port ${PORT}`);\r\n      console.log('Connection has been established successfully.');\r\n      app.emit('dbConnected');\r\n    });\r\n  })\r\n  .catch(err => {\r\n    console.error('Unable to connect to the database:', err);\r\n  });\r\n\r\nexport default app;\r\n"],"file":"app.js"}