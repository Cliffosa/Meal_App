{"version":3,"sources":["../../../api/src/controllers/mealController.js"],"names":["mealsController","req","res","status","send","success","message","meals","found","id","parseInt","params","map","meal","body","name","quantity","price","length","push","mealFound","itemIndex","index","newMeal","splice","mealController"],"mappings":"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","sourcesContent":["import meals from '../models/meals';\r\n\r\nclass mealsController {\r\n  // method to get all meals\r\n  getAllMeals(req, res) {\r\n    return res.status(200).send({\r\n      success: true,\r\n      message: 'meals retrieved successfully',\r\n      meals: meals\r\n    });\r\n  }\r\n\r\n  // get a single meal\r\n  getMeal(req, res) {\r\n    let found = false;\r\n    const id = parseInt(req.params.id, 10);\r\n    meals.map(meal => {\r\n      if (meal.id === id) {\r\n        found = true;\r\n        return res.status(200).send({\r\n          success: true,\r\n          message: 'meal retrieved successfully',\r\n          meal\r\n        });\r\n      }\r\n    });\r\n    if (!found) {\r\n      return res.status(404).send({\r\n        success: false,\r\n        message: 'meal does not exist'\r\n      });\r\n    }\r\n    // check for invalid meal id and return false\r\n  }\r\n\r\n  // create a meal\r\n  createMeal(req, res) {\r\n    // validate body\r\n    if (!req.body.name) {\r\n      return res.status(400).send({\r\n        success: false,\r\n        message: 'name is required'\r\n      });\r\n    } else if (!req.body.quantity) {\r\n      return res.status(400).send({\r\n        success: false,\r\n        message: 'quantity is required'\r\n      });\r\n    } else if (!req.body.price) {\r\n      return res.status(400).send({\r\n        success: false,\r\n        message: 'price is required'\r\n      });\r\n    }\r\n    const meal = {\r\n      id: meals.length + 1,\r\n      name: req.body.name,\r\n      quantity: req.body.quantity,\r\n      price: req.body.price\r\n    };\r\n    meals.push(meal);\r\n    return res.status(201).send({\r\n      success: true,\r\n      message: 'meal added successfully',\r\n      meal\r\n    });\r\n  }\r\n\r\n  // update a meal\r\n  updateMeal(req, res) {\r\n    const id = parseInt(req.params.id, 10);\r\n    let mealFound;\r\n    let itemIndex;\r\n    meals.map((meal, index) => {\r\n      if (meal.id === id) {\r\n        mealFound = meal;\r\n        itemIndex = index;\r\n      }\r\n    });\r\n\r\n    if (!mealFound) {\r\n      return res.status(404).send({\r\n        success: false,\r\n        message: 'meal not found'\r\n      });\r\n    }\r\n    // validate body\r\n    if (!req.body.name) {\r\n      return res.status(400).send({\r\n        success: false,\r\n        message: 'name is required'\r\n      });\r\n    } else if (!req.body.quantity) {\r\n      return res.status(400).send({\r\n        success: false,\r\n        message: 'quantity is required'\r\n      });\r\n    } else if (!req.body.price) {\r\n      return res.status(400).send({\r\n        success: 'false',\r\n        message: 'price is required'\r\n      });\r\n    }\r\n\r\n    const newMeal = {\r\n      id: mealFound.id,\r\n      name: req.body.name || mealFound.name,\r\n      quantity: req.body.quantity || mealFound.quantity,\r\n      price: req.body.price || mealFound.price\r\n    };\r\n\r\n    meals.splice(itemIndex, 1, newMeal);\r\n\r\n    return res.status(201).send({\r\n      success: true,\r\n      message: 'meal updated successfully',\r\n      newMeal\r\n    });\r\n  }\r\n\r\n  // delete a meal\r\n  deleteMeal(req, res) {\r\n    const id = parseInt(req.params.id, 10);\r\n    let mealFound;\r\n    let itemIndex;\r\n    meals.map((meal, index) => {\r\n      if (meal.id === id) {\r\n        mealFound = meal;\r\n        itemIndex = index;\r\n      }\r\n    });\r\n\r\n    if (!mealFound) {\r\n      return res.status(404).send({\r\n        success: false,\r\n        message: 'meal not found'\r\n      });\r\n    }\r\n    meals.splice(itemIndex, 1);\r\n\r\n    return res.status(200).send({\r\n      success: true,\r\n      message: 'meal deleted successfuly'\r\n    });\r\n  }\r\n}\r\n\r\n// create an instance of the class and export it\r\nconst mealController = new mealsController();\r\nexport default mealController;\r\n"],"file":"mealController.js"}